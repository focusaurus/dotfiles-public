#!/usr/bin/env bash

# Please Use Google Shell Style: https://google.github.io/styleguide/shell.xml

# ---- Start unofficial bash strict mode boilerplate
# http://redsymbol.net/articles/unofficial-bash-strict-mode/
set -o errexit  # always exit on error
set -o errtrace # trap errors in functions as well
set -o pipefail # don't ignore exit codes when piping output
set -u          # error on reference to unknown variable
# set -x # enable debugging

IFS=$'\n\t'
# ---- End unofficial bash strict mode boilerplate

# We have 2 tools that might apply:
# playerctl if we are playing music in a browser
# (typically youtube music in firefox)
# mpc if we are playing with mpd (music player daemon)
# Default to mpc because we prefer that. but
cmd="mpc"
toggle="toggle"
if ! mpc |& grep playing; then
cmd="playerctl"
toggle="play-pause"

fi
case "$1" in
play)
  "${cmd}" play
  ;;
pause)
  "${cmd}" pause
  ;;
toggle)
  "${cmd}" $"{toggle}"
  ;;
*)
 echo "Usage: $0 {play|pause|toggle}" 
 ;;
esac
